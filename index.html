<!DOCTYPE html>
<html>
<head>
    <title>Vincent van Gogh | A Wheatfield</title>
    <script src="https://threejs.org/build/three.js"></script>
    <script src="https://threejs.org/examples/jsm/webxr/ARButton.js"></script>
</head>
<body style="margin: 0;">
    <script>
        const clock = new THREE.Clock();
        
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.01, 20);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.xr.enabled = true;
        document.body.appendChild(renderer.domElement);

        document.body.appendChild(ARButton.createButton(renderer, { optionalFeatures: [ 'xr-hit-test' ] }));

        const geometry = new THREE.PlaneBufferGeometry();
        const video = document.createElement('video');
        video.src = './Assets/VG_Wip.mp4'; // replace with video file
        video.load();
        video.play();

        const texture = new THREE.VideoTexture(video);
        const material = new THREE.MeshBasicMaterial({ map: texture });
        const mesh = new THREE.Mesh(geometry, material);
        scene.add(mesh);

        function animate() {
            const dt = clock.getDelta();
            mesh.rotation.y += dt; // rotate the video for demo purposes

            renderer.setAnimationLoop(function () {
                renderer.render(scene, camera);
            });
        }

        window.addEventListener('click', function () { // start playing video on first user interaction
            video.play();
        });

        window.addEventListener('resize', onWindowResize, false);
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        animate();
    </script>
</body>
</html>
